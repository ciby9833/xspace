import{x as U,r as j,k as J,b as Se,l as ve,c as M,o as r,n as E,w as s,g as t,e as i,h as o,d as _,s as V,v as ae,I as Ae,f as S,H as ze,t as y,i as D,P as Ce,m as N,J as Ne,K as ke,E as Ie,a as Le,q as Ye,S as Pe,L as Ee,M as Qe,N as Ze,O as De,y as je,Q as we}from"./index-979b8016.js";import{_ as he}from"./_plugin-vue_export-helper-c27b6911.js";import{F as $e,S as Oe}from"./StopOutlined-b4edf275.js";const Be=v=>U({url:"/api/script",method:"get",params:v}),Fe=v=>U({url:`/api/script/${v}`,method:"get"}),We=v=>U({url:"/api/script",method:"post",data:v}),Ue=(v,Q)=>U({url:`/api/script/${v}`,method:"put",data:Q}),Ge=v=>U({url:`/api/script/${v}`,method:"delete"}),Re=v=>U({url:"/api/script/upload-images",method:"post",data:v,headers:{"Content-Type":"multipart/form-data"}}),be=v=>U({url:"/api/script/batch",method:"post",data:v}),Te=()=>U({url:"/api/script/company-stores",method:"get"}),Je=(v,Q)=>U({url:`/api/script/${v}/stores`,method:"post",data:{storeConfigs:Q}}),xe=v=>U({url:`/api/script/${v}/stores`,method:"get"});const Ve={class:"form-section"},He={class:"form-section"},qe={class:"image-upload-container"},Ke=["onDragstart","onDrop"],Xe=["src","onLoad"],et={class:"image-overlay"},tt={class:"image-order"},st={key:1,class:"upload-area"},at={key:2,class:"sort-tip"},lt={class:"store-config-container"},ot={class:"store-config-header"},it={key:0,class:"store-config-list"},nt={class:"store-info"},rt={class:"store-name"},ut={class:"store-address"},dt={key:0,class:"store-price-input"},ct={key:1,class:"no-stores"},pt={key:2,class:"stores-loading"},_t={__name:"ScriptFormModal",props:{visible:{type:Boolean,default:!1},scriptData:{type:Object,default:null},isEdit:{type:Boolean,default:!1}},emits:["update:visible","success"],setup(v,{emit:Q}){const I=v,le=Q,Z=j(),B=j(!1),x=j(!1),h=j(0),b=j(-1),C=j([]),A=j(!1),k=j([]),F=J({get:()=>I.visible,set:l=>le("update:visible",l)}),c=Se({name:"",type:"",background:"",description:"",min_players:1,max_players:6,duration:120,difficulty:"è¿›é˜¶",price:null,images:[],tags:[],props:"",is_active:!0}),O={name:[{required:!0,message:"è¯·è¾“å…¥å‰§æœ¬åç§°",trigger:"blur"},{min:2,max:100,message:"å‰§æœ¬åç§°é•¿åº¦ä¸º2-100ä¸ªå­—ç¬¦",trigger:"blur"}],type:[{required:!0,message:"è¯·é€‰æ‹©å‰§æœ¬ç±»å‹",trigger:"change"}],min_players:[{required:!0,message:"è¯·è¾“å…¥æœ€å°‘äººæ•°",trigger:"blur"},{type:"number",min:1,max:20,message:"æœ€å°‘äººæ•°åº”åœ¨1-20ä¹‹é—´",trigger:"blur"}],max_players:[{required:!0,message:"è¯·è¾“å…¥æœ€å¤šäººæ•°",trigger:"blur"},{type:"number",min:1,max:20,message:"æœ€å¤šäººæ•°åº”åœ¨1-20ä¹‹é—´",trigger:"blur"},{validator:(l,e)=>e<c.min_players?Promise.reject("æœ€å¤šäººæ•°ä¸èƒ½å°‘äºæœ€å°‘äººæ•°"):Promise.resolve(),trigger:"blur"}],duration:[{required:!0,message:"è¯·è¾“å…¥æ¸¸æˆæ—¶é•¿",trigger:"blur"},{type:"number",min:30,max:600,message:"æ¸¸æˆæ—¶é•¿åº”åœ¨30-600åˆ†é’Ÿä¹‹é—´",trigger:"blur"}],difficulty:[{required:!0,message:"è¯·é€‰æ‹©éš¾åº¦ç­‰çº§",trigger:"change"}]},W=async l=>{if(!l.type.startsWith("image/"))return N.error("åªèƒ½ä¸Šä¼ å›¾ç‰‡æ–‡ä»¶ï¼"),!1;if(!(l.size/1024/1024<5))return N.error("å›¾ç‰‡å¤§å°ä¸èƒ½è¶…è¿‡5MBï¼"),!1;if(c.images.length>=10)return N.error("æœ€å¤šåªèƒ½ä¸Šä¼ 10å¼ å›¾ç‰‡ï¼"),!1;try{x.value=!0;const g=new FormData;g.append("images",l);const z=await Re(g);z.data&&z.data.images?(c.images.push(...z.data.images),console.log("å›¾ç‰‡ä¸Šä¼ æˆåŠŸï¼Œå½“å‰å›¾ç‰‡æ•°ç»„:",c.images),h.value++,N.success(`æˆåŠŸä¸Šä¼  ${z.data.count} å¼ å›¾ç‰‡`)):(console.error("å›¾ç‰‡ä¸Šä¼ å“åº”æ ¼å¼å¼‚å¸¸:",z),N.error("å›¾ç‰‡ä¸Šä¼ å¤±è´¥ï¼šå“åº”æ ¼å¼å¼‚å¸¸"))}catch(g){console.error("å›¾ç‰‡ä¸Šä¼ å¤±è´¥:",g),N.error("å›¾ç‰‡ä¸Šä¼ å¤±è´¥")}finally{x.value=!1}return!1},ie=l=>{c.images.splice(l,1),h.value++,N.success("ç§»é™¤å›¾ç‰‡æˆåŠŸ")},H=(l,e)=>{b.value=l,e.target.classList.add("dragging"),e.dataTransfer.effectAllowed="move"},G=l=>{l.target.classList.remove("dragging"),b.value=-1},X=l=>{var e;l.preventDefault(),(e=l.target.closest(".image-item"))==null||e.classList.add("drag-over")},ee=l=>{var e;(e=l.target.closest(".image-item"))==null||e.classList.remove("drag-over")},q=(l,e)=>{var z;if(e.preventDefault(),(z=e.target.closest(".image-item"))==null||z.classList.remove("drag-over"),b.value===-1||b.value===l)return;const u=c.images[b.value];c.images.splice(b.value,1);const g=b.value<l?l-1:l;c.images.splice(g,0,u),b.value=-1,h.value++,N.success("å›¾ç‰‡é¡ºåºè°ƒæ•´æˆåŠŸ")},L=l=>l?l.startsWith("http")||l.startsWith("/")?l:`/${l}`:"",ne=l=>{console.error("å›¾ç‰‡åŠ è½½å¤±è´¥:",l.target.src),l.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0yMS4zMzMzIDIxLjMzMzNIMTZWNDIuNjY2N0g0OFYyMS4zMzMzSDQyLjY2NjdMMzggMTZIMjZMMjEuMzMzMyAyMS4zMzMzWiIgZmlsbD0iI0NDQ0NDQyIvPgo8cGF0aCBkPSJNMzIgMzcuMzMzM0MzNS42ODEzIDM3LjMzMzMgMzguNjY2NyAzNC4zNDc5IDM4LjY2NjcgMzFDMzguNjY2NyAyNy42NTIxIDM1LjY4MTMgMjQuNjY2NyAzMiAyNC42NjY3QzI4LjMxODcgMjQuNjY2NyAyNS4zMzMzIDI3LjY1MjEgMjUuMzMzMyAzMUMyNS4zMzMzIDM0LjM0NzkgMjguMzE4NyAzNy4zMzMzIDMyIDM3LjMzMzNaIiBmaWxsPSIjQ0NDQ0NDIi8+Cjwvc3ZnPgo="},f=async()=>{try{A.value=!0;const l=await Te();C.value=l.data||[]}catch(l){console.error("è·å–é—¨åº—åˆ—è¡¨å¤±è´¥:",l),N.error("è·å–é—¨åº—åˆ—è¡¨å¤±è´¥")}finally{A.value=!1}},m=async l=>{if(l)try{console.log("å¼€å§‹è·å–å‰§æœ¬é—¨åº—é…ç½®:",l);const u=(await xe(l)).data||[];console.log("è·å–åˆ°çš„é—¨åº—é…ç½®:",u),k.value=u.map(g=>({store_id:g.store_id,store_price:g.store_price,is_available:g.is_available!==!1})),console.log("è½¬æ¢åçš„é—¨åº—é…ç½®:",k.value)}catch(e){console.error("è·å–å‰§æœ¬é—¨åº—é…ç½®å¤±è´¥:",e),k.value=[]}},$=l=>k.value.some(e=>e.store_id===l),R=l=>{const e=k.value.find(u=>u.store_id===l);return e?e.store_price:null},re=(l,e)=>{e?$(l)||k.value.push({store_id:l,store_price:c.price||null,is_available:!0}):k.value=k.value.filter(u=>u.store_id!==l)},oe=(l,e)=>{const u=k.value.find(g=>g.store_id===l);u&&(u.store_price=e)},ue=()=>{C.value.forEach(l=>{$(l.id)||k.value.push({store_id:l.id,store_price:c.price||null,is_available:!0})})},K=()=>{var l;console.log("é‡ç½®è¡¨å•"),Object.assign(c,{name:"",type:"",background:"",description:"",min_players:1,max_players:6,duration:120,difficulty:"è¿›é˜¶",price:null,images:[],tags:[],props:"",is_active:!0}),k.value=[],h.value++,(l=Z.value)==null||l.resetFields()};ve(()=>I.scriptData,async(l,e)=>{console.log("scriptData å˜åŒ–:",{newData:l,oldData:e,isEdit:I.isEdit}),l&&I.isEdit&&(console.log("ç¼–è¾‘æ¨¡å¼ï¼Œæ¥æ”¶åˆ°å‰§æœ¬æ•°æ®:",l),Object.keys(c).forEach(u=>{l[u]!==void 0&&(u==="tags"?c[u]=Array.isArray(l[u])?l[u]:typeof l[u]=="string"?JSON.parse(l[u]||"[]"):[]:u==="images"?c[u]=Array.isArray(l[u])?l[u]:typeof l[u]=="string"?JSON.parse(l[u]||"[]"):[]:c[u]=l[u])}),l.id&&(C.value.length===0&&!A.value&&await f(),await m(l.id)))},{immediate:!1}),ve([()=>I.visible,()=>I.isEdit],([l,e],[u,g])=>{console.log("å¼¹çª—çŠ¶æ€å˜åŒ–:",{visible:l,isEdit:e,oldVisible:u,oldIsEdit:g}),l&&(console.log("å¼¹çª—æ˜¾ç¤ºï¼Œç¼–è¾‘æ¨¡å¼:",e),f(),e||(console.log("æ–°å¢æ¨¡å¼ï¼Œé‡ç½®è¡¨å•"),Ne(()=>{K()})))},{immediate:!0}),ve(()=>I.isEdit,(l,e)=>{console.log("ç¼–è¾‘æ¨¡å¼å˜åŒ–:",{isEdit:l,oldIsEdit:e,visible:I.visible}),I.visible&&!l&&e!==void 0&&(console.log("ä»ç¼–è¾‘æ¨¡å¼åˆ‡æ¢åˆ°æ–°å¢æ¨¡å¼ï¼Œé‡ç½®è¡¨å•"),Ne(()=>{K()}))});const de=async()=>{var l;try{await Z.value.validate(),B.value=!0;const e={...c,tags:c.tags.length>0?c.tags:null,images:c.images.length>0?c.images:[]};let u;if(I.isEdit){const g=await Ue(I.scriptData.id,e);u=I.scriptData.id,N.success("ç¼–è¾‘å‰§æœ¬æˆåŠŸ")}else{const g=await We(e);u=((l=g.data)==null?void 0:l.id)||g.id,N.success("åˆ›å»ºå‰§æœ¬æˆåŠŸ")}if(u)try{console.log("ä¿å­˜é—¨åº—é…ç½®:",k.value),await Je(u,k.value),console.log("é—¨åº—é…ç½®ä¿å­˜æˆåŠŸ"),k.value.length>0&&N.success(`å‰§æœ¬ä¿å­˜æˆåŠŸï¼Œå·²é…ç½® ${k.value.length} ä¸ªé—¨åº—`)}catch(g){console.error("é—¨åº—é…ç½®ä¿å­˜å¤±è´¥:",g),N.warning("å‰§æœ¬ä¿å­˜æˆåŠŸï¼Œä½†é—¨åº—é…ç½®ä¿å­˜å¤±è´¥")}le("success"),F.value=!1,K()}catch(e){console.error("æäº¤å¤±è´¥:",e),e.errorFields?N.error("è¯·æ£€æŸ¥è¡¨å•ä¿¡æ¯"):N.error(I.isEdit?"ç¼–è¾‘å‰§æœ¬å¤±è´¥":"åˆ›å»ºå‰§æœ¬å¤±è´¥")}finally{B.value=!1}},ce=()=>{K(),F.value=!1};return(l,e)=>{const u=M("a-input"),g=M("a-form-item"),z=M("a-select-option"),d=M("a-select"),a=M("a-input-number"),P=M("a-switch"),w=M("a-col"),te=M("a-row"),T=M("a-button"),me=M("a-upload"),_e=M("a-form-item-rest"),pe=M("a-textarea"),se=M("a-checkbox"),fe=M("a-empty"),ge=M("a-spin"),ye=M("a-form"),Me=M("a-modal");return r(),E(Me,{open:F.value,"onUpdate:open":e[13]||(e[13]=n=>F.value=n),title:v.isEdit?"ç¼–è¾‘å‰§æœ¬":"æ–°å¢å‰§æœ¬",width:"900px","confirm-loading":B.value,onOk:de,onCancel:ce},{default:s(()=>[t(ye,{ref_key:"formRef",ref:Z,model:c,rules:O,"label-col":{span:6},"wrapper-col":{span:18},layout:"horizontal"},{default:s(()=>[t(te,{gutter:24},{default:s(()=>[t(w,{span:12},{default:s(()=>[i("div",Ve,[e[31]||(e[31]=i("h3",{class:"section-title"},"åŸºæœ¬ä¿¡æ¯",-1)),t(g,{label:"å‰§æœ¬åç§°",name:"name"},{default:s(()=>[t(u,{value:c.name,"onUpdate:value":e[0]||(e[0]=n=>c.name=n),placeholder:"è¯·è¾“å…¥å‰§æœ¬åç§°",maxlength:"100"},null,8,["value"])]),_:1}),t(g,{label:"å‰§æœ¬ç±»å‹",name:"type"},{default:s(()=>[t(d,{value:c.type,"onUpdate:value":e[1]||(e[1]=n=>c.type=n),placeholder:"è¯·é€‰æ‹©å‰§æœ¬ç±»å‹"},{default:s(()=>[t(z,{value:"æ¬¢ä¹"},{default:s(()=>e[14]||(e[14]=[o("æ¬¢ä¹")])),_:1,__:[14]}),t(z,{value:"æƒŠæ‚š"},{default:s(()=>e[15]||(e[15]=[o("æƒŠæ‚š")])),_:1,__:[15]}),t(z,{value:"æ¨ç†"},{default:s(()=>e[16]||(e[16]=[o("æ¨ç†")])),_:1,__:[16]}),t(z,{value:"ææ€–"},{default:s(()=>e[17]||(e[17]=[o("ææ€–")])),_:1,__:[17]}),t(z,{value:"æƒ…æ„Ÿ"},{default:s(()=>e[18]||(e[18]=[o("æƒ…æ„Ÿ")])),_:1,__:[18]}),t(z,{value:"ç­–ç•¥"},{default:s(()=>e[19]||(e[19]=[o("ç­–ç•¥")])),_:1,__:[19]}),t(z,{value:"è¡€æŸ“é’Ÿæ¥¼"},{default:s(()=>e[20]||(e[20]=[o("è¡€æŸ“é’Ÿæ¥¼")])),_:1,__:[20]}),t(z,{value:"æ¡Œæ¸¸"},{default:s(()=>e[21]||(e[21]=[o("æ¡Œæ¸¸")])),_:1,__:[21]})]),_:1},8,["value"])]),_:1}),t(g,{label:"å‰§æœ¬èƒŒæ™¯",name:"background"},{default:s(()=>[t(d,{value:c.background,"onUpdate:value":e[2]||(e[2]=n=>c.background=n),placeholder:"è¯·é€‰æ‹©å‰§æœ¬èƒŒæ™¯","allow-clear":""},{default:s(()=>[t(z,{value:"ç°ä»£"},{default:s(()=>e[22]||(e[22]=[o("ç°ä»£")])),_:1,__:[22]}),t(z,{value:"ä¸­å›½å¤ä»£"},{default:s(()=>e[23]||(e[23]=[o("ä¸­å›½å¤ä»£")])),_:1,__:[23]}),t(z,{value:"æ¬§å¼"},{default:s(()=>e[24]||(e[24]=[o("æ¬§å¼")])),_:1,__:[24]}),t(z,{value:"æ—¥å¼"},{default:s(()=>e[25]||(e[25]=[o("æ—¥å¼")])),_:1,__:[25]}),t(z,{value:"æ¶ç©º"},{default:s(()=>e[26]||(e[26]=[o("æ¶ç©º")])),_:1,__:[26]})]),_:1},8,["value"])]),_:1}),t(g,{label:"éš¾åº¦ç­‰çº§",name:"difficulty"},{default:s(()=>[t(d,{value:c.difficulty,"onUpdate:value":e[3]||(e[3]=n=>c.difficulty=n),placeholder:"è¯·é€‰æ‹©éš¾åº¦ç­‰çº§"},{default:s(()=>[t(z,{value:"æ–°æ‰‹"},{default:s(()=>e[27]||(e[27]=[o("æ–°æ‰‹")])),_:1,__:[27]}),t(z,{value:"è¿›é˜¶"},{default:s(()=>e[28]||(e[28]=[o("è¿›é˜¶")])),_:1,__:[28]}),t(z,{value:"ç¡¬æ ¸"},{default:s(()=>e[29]||(e[29]=[o("ç¡¬æ ¸")])),_:1,__:[29]})]),_:1},8,["value"])]),_:1}),t(g,{label:"å»ºè®®ä»·æ ¼",name:"price"},{default:s(()=>[t(a,{value:c.price,"onUpdate:value":e[4]||(e[4]=n=>c.price=n),placeholder:"å»ºè®®ä»·æ ¼",min:0,precision:0,formatter:n=>`Rp ${n}`.replace(/\B(?=(\d{3})+(?!\d))/g,","),parser:n=>n.replace(/Rp\s?|(,*)/g,""),style:{width:"100%"}},{addonAfter:s(()=>e[30]||(e[30]=[o("IDR")])),_:1},8,["value","formatter","parser"])]),_:1}),t(g,{label:"çŠ¶æ€",name:"is_active"},{default:s(()=>[t(P,{checked:c.is_active,"onUpdate:checked":e[5]||(e[5]=n=>c.is_active=n),"checked-children":"å¯ç”¨","un-checked-children":"ç¦ç”¨"},null,8,["checked"])]),_:1})])]),_:1}),t(w,{span:12},{default:s(()=>[i("div",He,[e[38]||(e[38]=i("h3",{class:"section-title"},"æ¸¸æˆè®¾ç½®",-1)),t(g,{label:"æœ€å°‘äººæ•°",name:"min_players"},{default:s(()=>[t(a,{value:c.min_players,"onUpdate:value":e[6]||(e[6]=n=>c.min_players=n),placeholder:"æœ€å°‘äººæ•°",min:1,max:20,style:{width:"100%"}},null,8,["value"])]),_:1}),t(g,{label:"æœ€å¤šäººæ•°",name:"max_players"},{default:s(()=>[t(a,{value:c.max_players,"onUpdate:value":e[7]||(e[7]=n=>c.max_players=n),placeholder:"æœ€å¤šäººæ•°",min:c.min_players||1,max:20,style:{width:"100%"}},null,8,["value","min"])]),_:1}),t(g,{label:"æ¸¸æˆæ—¶é•¿",name:"duration"},{default:s(()=>[t(a,{value:c.duration,"onUpdate:value":e[8]||(e[8]=n=>c.duration=n),placeholder:"æ¸¸æˆæ—¶é•¿",min:30,max:600,step:15,style:{width:"100%"}},{addonAfter:s(()=>e[32]||(e[32]=[o("åˆ†é’Ÿ")])),_:1},8,["value"])]),_:1}),t(g,{label:"æ ‡ç­¾",name:"tags"},{default:s(()=>[t(d,{value:c.tags,"onUpdate:value":e[9]||(e[9]=n=>c.tags=n),mode:"tags",placeholder:"æ·»åŠ æ ‡ç­¾ï¼Œå›è½¦ç¡®è®¤","max-tag-count":8,style:{width:"100%"}},{default:s(()=>[t(z,{value:"æ–°æ‰‹å‹å¥½"},{default:s(()=>e[33]||(e[33]=[o("æ–°æ‰‹å‹å¥½")])),_:1,__:[33]}),t(z,{value:"çƒ§è„‘"},{default:s(()=>e[34]||(e[34]=[o("çƒ§è„‘")])),_:1,__:[34]}),t(z,{value:"çƒ­é—¨"},{default:s(()=>e[35]||(e[35]=[o("çƒ­é—¨")])),_:1,__:[35]}),t(z,{value:"ç»å…¸"},{default:s(()=>e[36]||(e[36]=[o("ç»å…¸")])),_:1,__:[36]}),t(z,{value:"å›¢å»º"},{default:s(()=>e[37]||(e[37]=[o("å›¢å»º")])),_:1,__:[37]})]),_:1},8,["value"])]),_:1})])]),_:1})]),_:1}),t(te,null,{default:s(()=>[t(w,{span:24},{default:s(()=>[t(g,{label:"å‰§æœ¬å›¾ç‰‡","label-col":{span:3},"wrapper-col":{span:21}},{default:s(()=>[t(_e,null,{default:s(()=>[i("div",qe,[c.images.length>0?(r(),_("div",{class:"image-list",key:h.value},[(r(!0),_(V,null,ae(c.images,(n,p)=>(r(),_("div",{key:`image-${p}-${n}`,class:"image-item",draggable:"true",onDragstart:Y=>H(p,Y),onDragend:G,onDragover:e[10]||(e[10]=Ae(()=>{},["prevent"])),onDragenter:X,onDragleave:ee,onDrop:Y=>q(p,Y)},[i("img",{src:L(n),onError:ne,onLoad:()=>console.log("å›¾ç‰‡åŠ è½½æˆåŠŸ:",n)},null,40,Xe),i("div",et,[t(T,{type:"text",size:"small",danger:"",onClick:Y=>ie(p)},{default:s(()=>[t(S(ze))]),_:2},1032,["onClick"])]),i("div",tt,y(p+1),1),e[39]||(e[39]=i("div",{class:"drag-handle"},"â‹®â‹®",-1))],40,Ke))),128))])):D("",!0),c.images.length<10?(r(),_("div",st,[t(me,{"file-list":[],multiple:!0,"before-upload":W,"show-upload-list":!1,accept:"image/*"},{default:s(()=>[t(T,{loading:x.value},{default:s(()=>[t(S(Ce)),e[40]||(e[40]=o(" ä¸Šä¼ å›¾ç‰‡ "))]),_:1,__:[40]},8,["loading"])]),_:1}),e[41]||(e[41]=i("div",{class:"upload-tips"},[o(" æœ€å¤šä¸Šä¼ 10å¼ å›¾ç‰‡ï¼Œå•å¼ ä¸è¶…è¿‡5MB"),i("br"),o(" æ”¯æŒ JPGã€PNGã€GIFã€WebP æ ¼å¼ ")],-1))])):D("",!0),c.images.length>1?(r(),_("div",at," ğŸ’¡ å¯æ‹–æ‹½å›¾ç‰‡è°ƒæ•´æ˜¾ç¤ºé¡ºåº ")):D("",!0)])]),_:1})]),_:1})]),_:1})]),_:1}),t(te,null,{default:s(()=>[t(w,{span:24},{default:s(()=>[t(g,{label:"å‰§æœ¬æè¿°",name:"description","label-col":{span:3},"wrapper-col":{span:21}},{default:s(()=>[t(pe,{value:c.description,"onUpdate:value":e[11]||(e[11]=n=>c.description=n),placeholder:"è¯·è¾“å…¥å‰§æœ¬æè¿°",rows:4,maxlength:"500","show-count":""},null,8,["value"])]),_:1}),t(g,{label:"å‰§æœ¬é“å…·",name:"props","label-col":{span:3},"wrapper-col":{span:21}},{default:s(()=>[t(pe,{value:c.props,"onUpdate:value":e[12]||(e[12]=n=>c.props=n),placeholder:"è¯·è¾“å…¥å‰§æœ¬é“å…·è¯´æ˜ï¼ˆå¦‚ç‰¹æ®Šé“å…·ã€ææ–™è¦æ±‚ç­‰ï¼‰",rows:3,maxlength:"300","show-count":""},null,8,["value"])]),_:1}),t(g,{label:"ä¸Šæ¶é—¨åº—","label-col":{span:3},"wrapper-col":{span:21}},{default:s(()=>[i("div",lt,[t(_e,null,{default:s(()=>[i("div",ot,[e[43]||(e[43]=i("span",null,"é€‰æ‹©è¦ä¸Šæ¶çš„é—¨åº—å¹¶è®¾ç½®ä»·æ ¼",-1)),C.value.length>0?(r(),E(T,{key:0,type:"link",size:"small",onClick:ue},{default:s(()=>e[42]||(e[42]=[o(" å…¨é€‰ ")])),_:1,__:[42]})):D("",!0)]),C.value.length>0?(r(),_("div",it,[(r(!0),_(V,null,ae(C.value,n=>(r(),_("div",{key:n.id,class:"store-config-item"},[t(se,{checked:$(n.id),onChange:p=>re(n.id,p.target.checked)},{default:s(()=>[i("div",nt,[i("span",rt,y(n.name),1),i("span",ut,y(n.address),1)])]),_:2},1032,["checked","onChange"]),$(n.id)?(r(),_("div",dt,[t(a,{value:R(n.id),onChange:p=>oe(n.id,p),placeholder:"é—¨åº—ä»·æ ¼",min:0,precision:0,formatter:p=>p?new Intl.NumberFormat("id-ID").format(p):"",parser:p=>p.replace(/\D/g,""),size:"small",style:{width:"140px"}},{addonBefore:s(()=>e[44]||(e[44]=[o("Rp")])),_:2},1032,["value","onChange","formatter","parser"])])):D("",!0)]))),128))])):A.value?D("",!0):(r(),_("div",ct,[t(fe,{description:"æš‚æ— å¯ç”¨é—¨åº—"})])),A.value?(r(),_("div",pt,[t(ge,{size:"small"}),e[45]||(e[45]=i("span",{style:{"margin-left":"8px"}},"åŠ è½½é—¨åº—åˆ—è¡¨...",-1))])):D("",!0)]),_:1})])]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1},8,["open","title","confirm-loading"])}}},gt=he(_t,[["__scopeId","data-v-6ea0076d"]]);const vt={key:0,class:"script-detail"},mt={class:"detail-section"},ft={class:"script-header"},yt={key:0,class:"script-images"},Mt=["src","alt"],bt={class:"image-preview-hint"},zt={key:0,class:"image-thumbnails"},kt=["onClick"],It=["src"],ht={key:1,class:"no-image"},Nt={class:"no-image-placeholder"},Dt={class:"script-basic"},jt={class:"script-name"},wt={class:"script-meta"},St={key:0,class:"price"},Ct={key:1,class:"no-price"},$t={key:0,class:"tags-section"},xt={class:"tags-container"},At={class:"detail-section"},Lt={key:0,class:"content-block"},Yt={class:"content-text"},Pt={key:1,class:"content-block"},Et={class:"content-text"},Qt={class:"content-block"},Zt={class:"store-stats"},Ot={key:0,class:"store-configs"},Bt={class:"store-config-item"},Ft={class:"store-info"},Wt={class:"store-main-info"},Ut={class:"store-name"},Gt={key:0,class:"store-address"},Rt={class:"store-price"},Tt={key:0,class:"price"},Jt={key:1,class:"no-price"},Vt={key:1,class:"no-stores"},Ht={class:"image-preview-container"},qt={class:"main-preview"},Kt=["src","alt"],Xt={key:0,class:"preview-thumbnails"},es=["onClick"],ts=["src"],ss={class:"preview-info"},as={__name:"ScriptDetailModal",props:{visible:{type:Boolean,default:!1},scriptData:{type:Object,default:null}},emits:["update:visible"],setup(v,{emit:Q}){const I=v,le=Q,Z=j(0),B=j(!1),x=j([]),h=j(0),b=j([]),C=j(!1),A=J({get:()=>I.visible,set:f=>le("update:visible",f)}),k=J(()=>{var f;if(!((f=I.scriptData)!=null&&f.images))return[];if(Array.isArray(I.scriptData.images))return I.scriptData.images;try{return JSON.parse(I.scriptData.images)}catch{return[]}}),F=J(()=>k.value.length===0?"":k.value[Z.value]||k.value[0]),c=J(()=>{var f;if(!((f=I.scriptData)!=null&&f.tags))return[];if(Array.isArray(I.scriptData.tags))return I.scriptData.tags;try{return JSON.parse(I.scriptData.tags)}catch{return[]}}),O=J(()=>b.value.filter(f=>f!==null)),W=async f=>{if(f)try{C.value=!0;const m=await xe(f);b.value=m.data||[],console.log("è·å–é—¨åº—é…ç½®æˆåŠŸ:",b.value)}catch(m){console.error("è·å–é—¨åº—é…ç½®å¤±è´¥:",m),b.value=[]}finally{C.value=!1}};ve([()=>I.visible,()=>I.scriptData],([f,m])=>{f&&(m!=null&&m.id)&&W(m.id)},{immediate:!0});const ie=()=>{Z.value=0,b.value=[],A.value=!1},H=f=>f?f.startsWith("http")?f:`http://localhost:3000${f}`:"",G=f=>({æ¬¢ä¹:"orange",æƒŠæ‚š:"purple",æ¨ç†:"blue",ææ€–:"red",æƒ…æ„Ÿ:"pink",ç­–ç•¥:"green",è¡€æŸ“é’Ÿæ¥¼:"volcano",æ¡Œæ¸¸:"cyan"})[f]||"default",X=f=>({æ–°æ‰‹:"green",è¿›é˜¶:"blue",ç¡¬æ ¸:"red"})[f]||"default",ee=f=>({ç°ä»£:"blue",ä¸­å›½å¤ä»£:"gold",æ¬§å¼:"purple",æ—¥å¼:"magenta",æ¶ç©º:"cyan"})[f]||"default",q=f=>{f.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0yMS4zMzMzIDIxLjMzMzNIMTZWNDIuNjY2N0g0OFYyMS4zMzMzSDQyLjY2NjdMMzggMTZIMjZMMjEuMzMzMyAyMS4zMzMzWiIgZmlsbD0iI0NDQ0NDQyIvPgo8cGF0aCBkPSJNMzIgMzcuMzMzM0MzNS42ODEzIDM3LjMzMzMgMzguNjY2NyAzNC4zNDc5IDM4LjY2NjcgMzFDMzguNjY2NyAyNy42NTIxIDM1LjY4MTMgMjQuNjY2NyAzMiAyNC42NjY3QzI4LjMxODcgMjQuNjY2NyAyNS4zMzMzIDI3LjY1MjEgMjUuMzMzMyAzMUMyNS4zMzMzIDM0LjM0NzkgMjguMzE4NyAzNy4zMzMzIDMyIDM3LjMzMzNaIiBmaWxsPSIjQ0NDQ0NDIi8+Cjwvc3ZnPgo="},L=f=>f?new Intl.NumberFormat("id-ID").format(f):"0",ne=(f,m)=>{!f||f.length===0||(x.value=f,h.value=m,B.value=!0)};return(f,m)=>{const $=M("a-tag"),R=M("a-descriptions-item"),re=M("a-descriptions"),oe=M("a-col"),ue=M("a-statistic"),K=M("a-list-item"),de=M("a-list"),ce=M("a-empty"),l=M("a-row"),e=M("a-modal");return r(),_(V,null,[t(e,{open:A.value,"onUpdate:open":m[1]||(m[1]=u=>A.value=u),title:"å‰§æœ¬è¯¦æƒ…",width:"1000px",footer:null,onCancel:ie},{default:s(()=>[v.scriptData?(r(),_("div",vt,[t(l,{gutter:24},{default:s(()=>[t(oe,{span:12},{default:s(()=>[i("div",mt,[m[6]||(m[6]=i("h3",{class:"section-title"},"åŸºæœ¬ä¿¡æ¯",-1)),i("div",ft,[k.value.length>0?(r(),_("div",yt,[i("div",{class:"main-image",onClick:m[0]||(m[0]=u=>ne(k.value,Z.value))},[i("img",{src:H(F.value),alt:v.scriptData.name,onError:q},null,40,Mt),i("div",bt,[t(S(ke)),m[3]||(m[3]=o(" ç‚¹å‡»æ”¾å¤§ "))])]),k.value.length>1?(r(),_("div",zt,[(r(!0),_(V,null,ae(k.value,(u,g)=>(r(),_("div",{key:g,class:Ie(["thumbnail",{active:Z.value===g}]),onClick:z=>Z.value=g},[i("img",{src:H(u),onError:q},null,40,It)],10,kt))),128))])):D("",!0)])):(r(),_("div",ht,[i("div",Nt,[t(S($e)),m[4]||(m[4]=i("span",null,"æš‚æ— å›¾ç‰‡",-1))])])),i("div",Dt,[i("h2",jt,y(v.scriptData.name),1),i("div",wt,[t($,{color:G(v.scriptData.type)},{default:s(()=>[o(y(v.scriptData.type),1)]),_:1},8,["color"]),v.scriptData.background?(r(),E($,{key:0,color:ee(v.scriptData.background)},{default:s(()=>[o(y(v.scriptData.background),1)]),_:1},8,["color"])):D("",!0),t($,{color:X(v.scriptData.difficulty)},{default:s(()=>[o(y(v.scriptData.difficulty),1)]),_:1},8,["color"]),t($,{color:v.scriptData.is_active?"green":"red"},{default:s(()=>[o(y(v.scriptData.is_active?"å¯ç”¨":"ç¦ç”¨"),1)]),_:1},8,["color"])])])]),t(re,{column:1,size:"small",class:"detail-descriptions"},{default:s(()=>[t(R,{label:"æ¸¸æˆäººæ•°"},{default:s(()=>[o(y(v.scriptData.min_players)+"-"+y(v.scriptData.max_players)+"äºº ",1)]),_:1}),t(R,{label:"æ¸¸æˆæ—¶é•¿"},{default:s(()=>[o(y(v.scriptData.duration)+"åˆ†é’Ÿ ",1)]),_:1}),t(R,{label:"å»ºè®®ä»·æ ¼"},{default:s(()=>[v.scriptData.price?(r(),_("span",St,"Rp "+y(L(v.scriptData.price)),1)):(r(),_("span",Ct,"æœªè®¾ç½®"))]),_:1}),t(R,{label:"åˆ›å»ºæ—¶é—´"},{default:s(()=>[o(y(v.scriptData.created_at),1)]),_:1}),t(R,{label:"æ›´æ–°æ—¶é—´"},{default:s(()=>[o(y(v.scriptData.updated_at),1)]),_:1})]),_:1}),c.value.length>0?(r(),_("div",$t,[m[5]||(m[5]=i("h4",null,"æ ‡ç­¾",-1)),i("div",xt,[(r(!0),_(V,null,ae(c.value,u=>(r(),E($,{key:u,color:"blue"},{default:s(()=>[o(y(u),1)]),_:2},1024))),128))])])):D("",!0)])]),_:1}),t(oe,{span:12},{default:s(()=>[i("div",At,[m[10]||(m[10]=i("h3",{class:"section-title"},"è¯¦ç»†ä¿¡æ¯",-1)),v.scriptData.description?(r(),_("div",Lt,[m[7]||(m[7]=i("h4",null,"å‰§æœ¬æè¿°",-1)),i("div",Yt,y(v.scriptData.description),1)])):D("",!0),v.scriptData.props?(r(),_("div",Pt,[m[8]||(m[8]=i("h4",null,"å‰§æœ¬é“å…·",-1)),i("div",Et,y(v.scriptData.props),1)])):D("",!0),i("div",Qt,[m[9]||(m[9]=i("h4",null,"ä¸Šæ¶é—¨åº—",-1)),i("div",Zt,[t(ue,{title:"å·²ä¸Šæ¶é—¨åº—",value:O.value.length,suffix:"ä¸ª","value-style":{color:"#1890ff"}},null,8,["value"])]),O.value.length>0?(r(),_("div",Ot,[t(de,{size:"small","data-source":O.value,split:!1},{renderItem:s(({item:u})=>[t(K,null,{default:s(()=>[i("div",Bt,[i("div",Ft,[i("div",Wt,[i("span",Ut,y(u.store_name),1),t($,{color:u.is_available?"green":"red",size:"small"},{default:s(()=>[o(y(u.is_available?"å¯ç”¨":"ç¦ç”¨"),1)]),_:2},1032,["color"])]),u.store_address?(r(),_("div",Gt,y(u.store_address),1)):D("",!0)]),i("div",Rt,[u.store_price?(r(),_("span",Tt,"Rp "+y(L(u.store_price)),1)):(r(),_("span",Jt,"æœªè®¾ä»·æ ¼"))])])]),_:2},1024)]),_:1},8,["data-source"])])):(r(),_("div",Vt,[t(ce,{description:"æš‚æœªåœ¨ä»»ä½•é—¨åº—ä¸Šæ¶",image:!1,style:{margin:"20px 0"}})]))])])]),_:1})]),_:1})])):D("",!0)]),_:1},8,["open"]),t(e,{open:B.value,"onUpdate:open":m[2]||(m[2]=u=>B.value=u),title:"å›¾ç‰‡é¢„è§ˆ",width:"800px",footer:null,centered:""},{default:s(()=>[i("div",Ht,[i("div",qt,[i("img",{src:H(x.value[h.value]),alt:`é¢„è§ˆå›¾ç‰‡ ${h.value+1}`,onError:q},null,40,Kt)]),x.value.length>1?(r(),_("div",Xt,[(r(!0),_(V,null,ae(x.value,(u,g)=>(r(),_("div",{key:g,class:Ie(["preview-thumbnail",{active:h.value===g}]),onClick:z=>h.value=g},[i("img",{src:H(u),onError:q},null,40,ts)],10,es))),128))])):D("",!0),i("div",ss,y(h.value+1)+" / "+y(x.value.length),1)])]),_:1},8,["open"])],64)}}},ls=he(as,[["__scopeId","data-v-5f15070d"]]);const os={class:"script-container"},is={class:"header-actions"},ns={class:"actions"},rs={key:0,class:"script-info"},us={class:"script-images"},ds=["onClick"],cs=["src"],ps={key:0,class:"image-count"},_s={class:"image-preview-hint"},gs={key:1,class:"no-image-placeholder"},vs={class:"script-details"},ms=["onClick"],fs={class:"script-meta"},ys={key:0,class:"script-description"},Ms={key:1,class:"player-info"},bs={class:"player-count"},zs={class:"difficulty"},ks={key:2,class:"duration"},Is={key:0,class:"price"},hs={key:1,class:"no-price"},Ns={key:6,class:"tags-display"},Ds={key:0,class:"more-tags"},js={key:0,class:"batch-actions"},ws={class:"selection-info"},Ss={class:"image-preview-container"},Cs={class:"main-preview"},$s=["src","alt"],xs={key:0,class:"preview-thumbnails"},As=["onClick"],Ls=["src"],Ys={class:"preview-info"},Ps={__name:"ScriptView",setup(v){const Q=Le(),I=J(()=>Q.hasPermission("script.manage")),le=J(()=>Q.hasPermission("script.manage")),Z=J(()=>Q.hasPermission("script.manage")),B=j([]),x=j(!1),h=j([]),b=Se({type:void 0,background:void 0,is_active:void 0,min_players:void 0}),C=j(!1),A=j(!1),k=j(null),F=j(!1),c=j(!1),O=j([]),W=j(0),ie=[{title:"å‰§æœ¬ä¿¡æ¯",key:"script_info",width:300,fixed:"left"},{title:"æ¸¸æˆè®¾ç½®",key:"players",width:120,align:"center"},{title:"æ—¶é•¿",key:"duration",width:80,align:"center"},{title:"ä»·æ ¼",key:"price",width:100,align:"center"},{title:"çŠ¶æ€",key:"status",width:80,align:"center"},{title:"é—¨åº—",key:"store_count",width:80,align:"center"},{title:"æ ‡ç­¾",key:"tags",width:150},{title:"åˆ›å»ºæ—¶é—´",dataIndex:"created_at",width:180},{title:"æ“ä½œ",key:"action",width:150,fixed:"right"}],H={selectedRowKeys:h,onChange:d=>{h.value=d}},G=d=>{if(!d.images)return[];if(Array.isArray(d.images))return d.images;try{return JSON.parse(d.images)}catch{return[]}},X=d=>{if(!d.tags)return[];if(Array.isArray(d.tags))return d.tags;try{return JSON.parse(d.tags)}catch{return[]}},ee=d=>d?d.startsWith("http")?d:`http://localhost:3000${d}`:"",q=(d,a=0)=>{!d||d.length===0||(O.value=d,W.value=a,c.value=!0)},L=async()=>{x.value=!0;try{const d={};b.type&&(d.type=b.type),b.background&&(d.background=b.background),b.is_active!==void 0&&(d.is_active=b.is_active),b.min_players&&(d.min_players=b.min_players);const a=await Be(d);B.value=a.data||a||[]}catch(d){console.error("è·å–å‰§æœ¬åˆ—è¡¨å¤±è´¥:",d),N.error(`è·å–å‰§æœ¬åˆ—è¡¨å¤±è´¥: ${d.message}`)}finally{x.value=!1}},ne=()=>{L()},f=()=>{Object.keys(b).forEach(d=>{b[d]=void 0}),L()},m=()=>{k.value=null,F.value=!1,C.value=!0},$=d=>{k.value=d,A.value=!0},R=async d=>{try{const a=await Fe(d.id);k.value=a.data||a,F.value=!0,C.value=!0}catch(a){console.error("è·å–å‰§æœ¬è¯¦æƒ…å¤±è´¥:",a),N.error("è·å–å‰§æœ¬è¯¦æƒ…å¤±è´¥")}},re=d=>{De.confirm({title:"ç¡®è®¤åˆ é™¤",icon:je(we),content:`ç¡®å®šè¦åˆ é™¤å‰§æœ¬"${d.name}"å—ï¼Ÿåˆ é™¤åç›¸å…³å›¾ç‰‡ä¹Ÿä¼šè¢«æ¸…ç†ã€‚`,onOk:async()=>{try{await Ge(d.id),N.success("åˆ é™¤æˆåŠŸ"),L()}catch{N.error("åˆ é™¤å¤±è´¥")}}})},oe=()=>{L()},ue=()=>{h.value=[]},K=async()=>{try{await be({operation:"enable",script_ids:h.value}),N.success("æ‰¹é‡å¯ç”¨æˆåŠŸ"),h.value=[],L()}catch{N.error("æ‰¹é‡å¯ç”¨å¤±è´¥")}},de=async()=>{try{await be({operation:"disable",script_ids:h.value}),N.success("æ‰¹é‡ç¦ç”¨æˆåŠŸ"),h.value=[],L()}catch{N.error("æ‰¹é‡ç¦ç”¨å¤±è´¥")}},ce=()=>{De.confirm({title:"ç¡®è®¤æ‰¹é‡åˆ é™¤",icon:je(we),content:`ç¡®å®šè¦åˆ é™¤é€‰ä¸­çš„ ${h.value.length} ä¸ªå‰§æœ¬å—ï¼Ÿåˆ é™¤åç›¸å…³å›¾ç‰‡ä¹Ÿä¼šè¢«æ¸…ç†ã€‚`,onOk:async()=>{try{await be({operation:"delete",script_ids:h.value}),N.success("æ‰¹é‡åˆ é™¤æˆåŠŸ"),h.value=[],L()}catch{N.error("æ‰¹é‡åˆ é™¤å¤±è´¥")}}})},l=d=>({æ¬¢ä¹:"orange",æƒŠæ‚š:"purple",æ¨ç†:"blue",ææ€–:"red",æƒ…æ„Ÿ:"pink",ç­–ç•¥:"green",è¡€æŸ“é’Ÿæ¥¼:"volcano",æ¡Œæ¸¸:"cyan"})[d]||"default",e=d=>({æ–°æ‰‹:"green",è¿›é˜¶:"blue",ç¡¬æ ¸:"red"})[d]||"default",u=d=>({ç°ä»£:"blue",ä¸­å›½å¤ä»£:"gold",æ¬§å¼:"purple",æ—¥å¼:"magenta",æ¶ç©º:"cyan"})[d]||"default",g=d=>{d.target.src="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjQiIGhlaWdodD0iNjQiIHZpZXdCb3g9IjAgMCA2NCA2NCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHJlY3Qgd2lkdGg9IjY0IiBoZWlnaHQ9IjY0IiBmaWxsPSIjRjVGNUY1Ii8+CjxwYXRoIGQ9Ik0yMS4zMzMzIDIxLjMzMzNIMTZWNDIuNjY2N0g0OFYyMS4zMzMzSDQyLjY2NjdMMzggMTZIMjZMMjEuMzMzMyAyMS4zMzMzWiIgZmlsbD0iI0NDQ0NDQyIvPgo8cGF0aCBkPSJNMzIgMzcuMzMzM0MzNS42ODEzIDM3LjMzMzMgMzguNjY2NyAzNC4zNDc5IDM4LjY2NjcgMzFDMzguNjY2NyAyNy42NTIxIDM1LjY4MTMgMjQuNjY2NyAzMiAyNC42NjY3QzI4LjMxODcgMjQuNjY2NyAyNS4zMzMzIDI3LjY1MjEgMjUuMzMzMyAzMUMyNS4zMzMzIDM0LjM0NzkgMjguMzE4NyAzNy4zMzMzIDMyIDM3LjMzMzNaIiBmaWxsPSIjQ0NDQ0NDIi8+Cjwvc3ZnPgo="},z=d=>d?new Intl.NumberFormat("id-ID").format(d):"0";return Ye(()=>{console.log("ScriptViewç»„ä»¶æŒ‚è½½å®Œæˆ"),L()}),(d,a)=>{const P=M("a-button"),w=M("a-select-option"),te=M("a-select"),T=M("a-form-item"),me=M("a-input-number"),_e=M("a-form"),pe=M("a-card"),se=M("a-tag"),fe=M("a-badge"),ge=M("a-space"),ye=M("a-table"),Me=M("a-modal");return r(),_("div",os,[i("div",is,[a[8]||(a[8]=i("h2",null,"å‰§æœ¬ç®¡ç†",-1)),i("div",ns,[I.value?(r(),E(P,{key:0,type:"primary",onClick:m},{default:s(()=>[t(S(Ce)),a[7]||(a[7]=o(" æ–°å¢å‰§æœ¬ "))]),_:1,__:[7]})):D("",!0)])]),t(pe,{class:"filter-card"},{default:s(()=>[t(_e,{layout:"inline",model:b,onFinish:ne},{default:s(()=>[t(T,{label:"å‰§æœ¬ç±»å‹"},{default:s(()=>[t(te,{value:b.type,"onUpdate:value":a[0]||(a[0]=n=>b.type=n),placeholder:"é€‰æ‹©ç±»å‹",style:{width:"120px"},"allow-clear":""},{default:s(()=>[t(w,{value:"æ¬¢ä¹"},{default:s(()=>a[9]||(a[9]=[o("æ¬¢ä¹")])),_:1,__:[9]}),t(w,{value:"æƒŠæ‚š"},{default:s(()=>a[10]||(a[10]=[o("æƒŠæ‚š")])),_:1,__:[10]}),t(w,{value:"æ¨ç†"},{default:s(()=>a[11]||(a[11]=[o("æ¨ç†")])),_:1,__:[11]}),t(w,{value:"ææ€–"},{default:s(()=>a[12]||(a[12]=[o("ææ€–")])),_:1,__:[12]}),t(w,{value:"æƒ…æ„Ÿ"},{default:s(()=>a[13]||(a[13]=[o("æƒ…æ„Ÿ")])),_:1,__:[13]}),t(w,{value:"ç­–ç•¥"},{default:s(()=>a[14]||(a[14]=[o("ç­–ç•¥")])),_:1,__:[14]}),t(w,{value:"è¡€æŸ“é’Ÿæ¥¼"},{default:s(()=>a[15]||(a[15]=[o("è¡€æŸ“é’Ÿæ¥¼")])),_:1,__:[15]}),t(w,{value:"æ¡Œæ¸¸"},{default:s(()=>a[16]||(a[16]=[o("æ¡Œæ¸¸")])),_:1,__:[16]})]),_:1},8,["value"])]),_:1}),t(T,{label:"å‰§æœ¬èƒŒæ™¯"},{default:s(()=>[t(te,{value:b.background,"onUpdate:value":a[1]||(a[1]=n=>b.background=n),placeholder:"é€‰æ‹©èƒŒæ™¯",style:{width:"120px"},"allow-clear":""},{default:s(()=>[t(w,{value:"ç°ä»£"},{default:s(()=>a[17]||(a[17]=[o("ç°ä»£")])),_:1,__:[17]}),t(w,{value:"ä¸­å›½å¤ä»£"},{default:s(()=>a[18]||(a[18]=[o("ä¸­å›½å¤ä»£")])),_:1,__:[18]}),t(w,{value:"æ¬§å¼"},{default:s(()=>a[19]||(a[19]=[o("æ¬§å¼")])),_:1,__:[19]}),t(w,{value:"æ—¥å¼"},{default:s(()=>a[20]||(a[20]=[o("æ—¥å¼")])),_:1,__:[20]}),t(w,{value:"æ¶ç©º"},{default:s(()=>a[21]||(a[21]=[o("æ¶ç©º")])),_:1,__:[21]})]),_:1},8,["value"])]),_:1}),t(T,{label:"çŠ¶æ€"},{default:s(()=>[t(te,{value:b.is_active,"onUpdate:value":a[2]||(a[2]=n=>b.is_active=n),placeholder:"é€‰æ‹©çŠ¶æ€",style:{width:"100px"},"allow-clear":""},{default:s(()=>[t(w,{value:!0},{default:s(()=>a[22]||(a[22]=[o("å¯ç”¨")])),_:1,__:[22]}),t(w,{value:!1},{default:s(()=>a[23]||(a[23]=[o("ç¦ç”¨")])),_:1,__:[23]})]),_:1},8,["value"])]),_:1}),t(T,{label:"æœ€å°‘äººæ•°"},{default:s(()=>[t(me,{value:b.min_players,"onUpdate:value":a[3]||(a[3]=n=>b.min_players=n),placeholder:"æœ€å°‘äººæ•°",min:1,max:20,style:{width:"120px"}},null,8,["value"])]),_:1}),t(T,null,{default:s(()=>[t(P,{type:"primary","html-type":"submit"},{default:s(()=>[t(S(Pe)),a[24]||(a[24]=o(" æŸ¥è¯¢ "))]),_:1,__:[24]}),t(P,{onClick:f,style:{"margin-left":"8px"}},{default:s(()=>a[25]||(a[25]=[o(" é‡ç½® ")])),_:1,__:[25]})]),_:1})]),_:1},8,["model"])]),_:1}),t(pe,null,{default:s(()=>[t(ye,{columns:ie,"data-source":B.value,loading:x.value,"row-selection":H,"row-key":"id",scroll:{x:1600},pagination:{pageSize:10,showSizeChanger:!0,showQuickJumper:!0}},{bodyCell:s(({column:n,record:p})=>[n.key==="script_info"?(r(),_("div",rs,[i("div",us,[G(p).length>0?(r(),_("div",{key:0,class:"image-gallery",onClick:Y=>q(G(p),0)},[i("img",{src:ee(G(p)[0]),class:"main-script-image",onError:g},null,40,cs),G(p).length>1?(r(),_("div",ps," +"+y(G(p).length-1),1)):D("",!0),i("div",_s,[t(S(ke)),a[26]||(a[26]=o(" ç‚¹å‡»é¢„è§ˆ "))])],8,ds)):(r(),_("div",gs,[t(S($e))]))]),i("div",vs,[i("div",{class:"script-name",onClick:Y=>$(p)},y(p.name),9,ms),i("div",fs,[t(se,{color:l(p.type),size:"small"},{default:s(()=>[o(y(p.type),1)]),_:2},1032,["color"]),p.background?(r(),E(se,{key:0,color:u(p.background),size:"small"},{default:s(()=>[o(y(p.background),1)]),_:2},1032,["color"])):D("",!0)]),p.description?(r(),_("div",ys,y(p.description.substring(0,50))+y(p.description.length>50?"...":""),1)):D("",!0)])])):n.key==="players"?(r(),_("div",Ms,[i("span",bs,y(p.min_players)+"-"+y(p.max_players)+"äºº",1),i("div",zs,[t(se,{color:e(p.difficulty),size:"small"},{default:s(()=>[o(y(p.difficulty),1)]),_:2},1032,["color"])])])):n.key==="duration"?(r(),_("span",ks,y(p.duration)+"åˆ†é’Ÿ",1)):n.key==="price"?(r(),_(V,{key:3},[p.price?(r(),_("span",Is,"Rp "+y(z(p.price)),1)):(r(),_("span",hs,"æœªè®¾ç½®"))],64)):n.key==="status"?(r(),E(se,{key:4,color:p.is_active?"green":"red"},{default:s(()=>[o(y(p.is_active?"å¯ç”¨":"ç¦ç”¨"),1)]),_:2},1032,["color"])):n.key==="store_count"?(r(),E(fe,{key:5,count:p.store_count,"number-style":{backgroundColor:"#1890ff"}},null,8,["count"])):n.key==="tags"?(r(),_("div",Ns,[(r(!0),_(V,null,ae(X(p).slice(0,2),Y=>(r(),E(se,{key:Y,color:"blue",size:"small"},{default:s(()=>[o(y(Y),1)]),_:2},1024))),128)),X(p).length>2?(r(),_("span",Ds," +"+y(X(p).length-2),1)):D("",!0)])):n.key==="action"?(r(),E(ge,{key:7},{default:s(()=>[t(P,{size:"small",type:"link",onClick:Y=>$(p)},{default:s(()=>[t(S(ke)),a[27]||(a[27]=o(" æŸ¥çœ‹ "))]),_:2,__:[27]},1032,["onClick"]),le.value?(r(),E(P,{key:0,size:"small",type:"link",onClick:Y=>R(p)},{default:s(()=>[t(S(Ee)),a[28]||(a[28]=o(" ç¼–è¾‘ "))]),_:2,__:[28]},1032,["onClick"])):D("",!0),Z.value?(r(),E(P,{key:1,size:"small",type:"link",danger:"",onClick:Y=>re(p)},{default:s(()=>[t(S(ze)),a[29]||(a[29]=o(" åˆ é™¤ "))]),_:2,__:[29]},1032,["onClick"])):D("",!0)]),_:2},1024)):D("",!0)]),_:1},8,["data-source","loading"]),h.value.length>0?(r(),_("div",js,[t(ge,null,{default:s(()=>[i("span",ws,[t(S(Qe)),o(" å·²é€‰æ‹© "+y(h.value.length)+" é¡¹ ",1)]),t(P,{onClick:K,type:"primary",ghost:""},{default:s(()=>[t(S(Ze)),a[30]||(a[30]=o(" æ‰¹é‡å¯ç”¨ "))]),_:1,__:[30]}),t(P,{onClick:de,type:"primary",ghost:""},{default:s(()=>[t(S(Oe)),a[31]||(a[31]=o(" æ‰¹é‡ç¦ç”¨ "))]),_:1,__:[31]}),t(P,{onClick:ce,danger:"",type:"primary",ghost:""},{default:s(()=>[t(S(ze)),a[32]||(a[32]=o(" æ‰¹é‡åˆ é™¤ "))]),_:1,__:[32]}),t(P,{onClick:ue,type:"link"},{default:s(()=>a[33]||(a[33]=[o(" æ¸…ç©ºé€‰æ‹© ")])),_:1,__:[33]})]),_:1})])):D("",!0)]),_:1}),t(gt,{visible:C.value,"onUpdate:visible":a[4]||(a[4]=n=>C.value=n),"script-data":k.value,"is-edit":F.value,onSuccess:oe},null,8,["visible","script-data","is-edit"]),t(ls,{visible:A.value,"onUpdate:visible":a[5]||(a[5]=n=>A.value=n),"script-data":k.value},null,8,["visible","script-data"]),t(Me,{open:c.value,"onUpdate:open":a[6]||(a[6]=n=>c.value=n),title:"å›¾ç‰‡é¢„è§ˆ",width:"800px",footer:null,centered:""},{default:s(()=>[i("div",Ss,[i("div",Cs,[i("img",{src:ee(O.value[W.value]),alt:`é¢„è§ˆå›¾ç‰‡ ${W.value+1}`,onError:g},null,40,$s)]),O.value.length>1?(r(),_("div",xs,[(r(!0),_(V,null,ae(O.value,(n,p)=>(r(),_("div",{key:p,class:Ie(["preview-thumbnail",{active:W.value===p}]),onClick:Y=>W.value=p},[i("img",{src:ee(n),onError:g},null,40,Ls)],10,As))),128))])):D("",!0),i("div",Ys,y(W.value+1)+" / "+y(O.value.length),1)])]),_:1},8,["open"])])}}},Os=he(Ps,[["__scopeId","data-v-043ebde0"]]);export{Os as default};
