import{u as B,a as C,r as S,b as q,c as r,o as f,d as y,e as t,t as D,f as w,g as o,w as u,h as m,i as F,m as P}from"./index-979b8016.js";import{_ as R}from"./_plugin-vue_export-helper-c27b6911.js";const T={class:"login-container"},U={class:"login-box"},A={class:"login-header"},E={key:0,class:"test-accounts"},I={__name:"LoginView",setup($){const b=B(),h=C(),x="xspace管理系统",V=!1,c=S(!1),a=q({email:"",password:""}),k={email:[{required:!0,message:"请输入邮箱"},{type:"email",message:"请输入正确的邮箱格式"}],password:[{required:!0,message:"请输入密码"},{min:6,message:"密码长度至少6位"}]},L=async()=>{var i,e,p,n,d,_,g,v,l;if(!c.value){c.value=!0;try{const s=await h.login(a);console.log("登录成功，用户信息:",{id:(i=s.user)==null?void 0:i.id,name:(e=s.user)==null?void 0:e.name,email:(p=s.user)==null?void 0:p.email,role:(n=s.user)==null?void 0:n.role,account_level:(d=s.user)==null?void 0:d.account_level,company_id:(_=s.user)==null?void 0:_.company_id,company_name:(g=s.user)==null?void 0:g.company_name}),P.success(`欢迎回来，${((v=s.user)==null?void 0:v.name)||"用户"}！`);const z=N((l=s.user)==null?void 0:l.account_level);b.push(z)}catch(s){console.error("登录失败:",s)}finally{c.value=!1}}},N=i=>{switch(i){case"platform":return"/dashboard";case"company":return"/users";case"store":return"/users";default:return"/dashboard"}};return(i,e)=>{const p=r("a-input"),n=r("a-form-item"),d=r("a-input-password"),_=r("a-button"),g=r("a-form"),v=r("a-divider");return f(),y("div",T,[t("div",U,[t("div",A,[t("h1",null,D(w(x)),1),e[2]||(e[2]=t("p",null,"请登录您的账户",-1))]),o(g,{model:a,rules:k,onFinish:L,layout:"vertical"},{default:u(()=>[o(n,{label:"邮箱",name:"email"},{default:u(()=>[o(p,{value:a.email,"onUpdate:value":e[0]||(e[0]=l=>a.email=l),placeholder:"请输入邮箱",size:"large",type:"email"},null,8,["value"])]),_:1}),o(n,{label:"密码",name:"password"},{default:u(()=>[o(d,{value:a.password,"onUpdate:value":e[1]||(e[1]=l=>a.password=l),placeholder:"请输入密码",size:"large"},null,8,["value"])]),_:1}),o(n,null,{default:u(()=>[o(_,{type:"primary","html-type":"submit",size:"large",loading:c.value,block:""},{default:u(()=>e[3]||(e[3]=[m(" 登录 ")])),_:1,__:[3]},8,["loading"])]),_:1})]),_:1},8,["model"]),w(V)?(f(),y("div",E,[o(v,null,{default:u(()=>e[4]||(e[4]=[m("测试账户")])),_:1,__:[4]}),e[5]||(e[5]=t("div",{class:"account-tips"},[t("p",null,[t("strong",null,"平台管理员:"),m(" platform@test.com / temp123456")]),t("p",null,[t("strong",null,"公司管理员:"),m(" company@test.com / temp123456")]),t("p",null,[t("strong",null,"门店管理员:"),m(" store@test.com / temp123456")])],-1))])):F("",!0)])])}}},H=R(I,[["__scopeId","data-v-e76925b7"]]);export{H as default};
